#!/usr/bin/env bash
set -euo pipefail

echo "Running pre-push checks..."

echo "[1/3] cargo fmt --check"
cargo fmt --all -- --check

echo "[2/3] cargo clippy"
cargo clippy --workspace --all-targets -- -D warnings

echo "[3/3] cargo test (offline)"
cargo test -p grpcurl-core --lib
cargo test -p grpcurl

echo "All pre-push checks passed."
